Pakiet EWDrspo służy do pobierania danych placówek oswiatowych:
szkół podstawowych, gimnazjów, techników i liceów ogólnokształcących oraz zespołów, do których należą. Ze względu na czas pobierania danych zdecydowano się podzielić pobieranie danych ze względu na województwa. Przykładowy kod realizujący pobieranie danych dla wszystkich województw w wersji równoległej:

require(snow)

toPar <- function(kod_woj){
  require(EWDrspo)
  nazwa = "Wynik//Test//rspo"
  plik = paste(nazwa,"_",kod_woj,".csv",sep="")
  dane_wojewodztwa(plik,kod_woj)
}

kody = kody_wojewodztw()
cl <- makeCluster(8, type = "SOCK")
  parSapply(cl,kody,toPar)
stopCluster(cl)

Powyższy kod generuje po jednym pliku dla każdego województwa.
Plik dla całego kraju otrzymamy wywołując:

kody = kody_wojewodztw()
folder = "Wynik//Test//"
nazwaPliku = "rspo"
pliki = paste(folder,nazwaPliku,"_",kody,".csv",sep="")

polacz_pliki(pliki,"Wynik//rspoPGLoTZ.csv")


Do przetestowania powyższego wyniku pod kątem obecności wszystkich nadrzędnych RSPO 
może posłużyć kod:


tab = read.csv2("Wynik//rspoPGLoTZ.csv",row.names=NULL,fileEncoding ="UTF-8",na="" )

# Pobranie numerów RSPO placówek
rspo = as.character(tab[,colnames(tab)=="Numer.RSPO"])

# zmienna ret zawiera numery RSPO, dla których poszukiwania nadrzędnych jednostek
# nie zakończyły się powodzeniem.
ret = NULL

# Zmienna braki zawiera nie znalezione w bazie danych numery RSPO placówek nadrzędnych.
braki = NULL
for(ind in 1:length(rspo)){
  rspoStr = rspo[ind]
  nad = nadrzedne_rspo(rspoStr)

  if(length(nad)==0){
    next();
  }
  cat(ind," ")
  
  for(v in 1:length(nad)){
    if(!nad[v] %in% rspo){
      braki = c(braki,nad)
      ret = c(ret,rspoStr)
    }
  }
}



